# IPv4 IPv6 IP-PP
### IPv4
![[Pasted image 20220526235059.png]]
- **Version number** 4 bits specify protocol version
- **HeaderLength** 4 bits used to determine where in the datagram the payload starts. Maybe says if there are "options"
- **Type of service** I guess this says if its FTP or http or whatever
- **datagram length** Total length of IP datagram field is 16 bits long 
- **Identifier, flags, frag offset** have to do with IP fragmentation (no details provided)
- **Time to live** (TTL) ensure that datagrams do not circulate forever in the network its a number that gets decremented each time the datagram is processed. If it reaches 0 it gets dropped
- **Protocol** used when IP datagram reaches final destination. indicates the transport layer or protocol to which the data portion of this datagram should be passed. EG: value 6 indicates TCP and 17 indicates UDP
- **Header Checksum** Aids router in detecting bit errors in IP datagramsuses 1s compliment. TYpically discard bad ones
- **Source and desitination IP** self explanitory. Destination usually comes from dns
- **Options** variable length... not much info provided in text
- **DATA** whatever were sending
### IPv4 Datagram Fragmentation
Maximum amound of data that a link-layer frame can carry is called the [[MTU]]. There is a p roblem that ther are multiple protocols on the internet with varying size MTUs. Inorder to address this, if a router is forwarding a packet to a router with a smaller MTU it splits it up int *fragrments* which are reassembled before they reach the transport layer. The recieving host can tell it's a framgent by the Identier flag offset. The last one has a zero
### IPv4 Addressing
- 32 bits long (4 bytes) $2^{32}$ (~4b) possible IP address 
- Written in *dotted-decimal notation* 
- **Subnet mask** example */24* meanns the left most 24 of the 32 bits
	- **Classless Interdomain Routing (CIDR) pronounced cider)**
	- Maybe callled Network prefix
	- When datagrams from outside the subnet are being forwarded to the subnet only the prefix is considered
- **Classful addressing** before CIDR subnets were constrainged to {8,16,24} bitst known as class {A,B,C}
	- This became problematic because the resolution was really bad /24 supports 254 hosts and /16 goes all the way up to 65,634
- **IP broadcast address**  When a host sends a datagram with destination address 255.255.255.255, the message is delivered to all hosts on the same subnet. Routers optionally forward the message into neighboring subnets as well
>[!The INTERWEB! Where do ISPs  get their IP addys?]
>IP addresses are managed under the authority of the Internet Corporation for Assigned Names and Numbers (ICANN). FF: THey also manage DNS root servers



