# Routers
### Words
- [[NAT]]
## Router components
1. [[Input ports]]
	- *port* in this context is the physical port and not to be confused with the software used ports
2. [[Switching Fabric]]
3. [[Output port]]
4. [[Routing processor]]

> This stuff is almost always hardware implimentation because it processes data too fast for software to control it

- COntrol plane stuff is usually software controlled and is much slower than actual routing (ms vs ns)
## Input port Processing and destination Based Forwading
- Example of possible routingtable:
- 
|prefix|Link interface|
|---|---|
|11001000 00010111 00010|0|
|11001000 00010111 00011000| 1|
|11001000 00010111 00011|2|
|Otherwise|3|

With this example the router would match the prefix of the packets destination and send it out that port if it doesnt match anything just send it to 3.
>[!Longests prefix matching rule]
>It is possible in the above example for an address to match port 2 and port 1 In this case the router will go with the longest prefix it can match

- It is possible that a packet is unable to enter the switching fabric due to traffic so queuing will happen at the input port
## Switching 

>The switching fabric is at the very heart of a router, as it is through this fabric that the packets are actually switched (that is, forwarded) from an input port to an output port. Switching can be accomplished in a number of ways.

- **Switching Via Memory**
	- Sounds like this was implimented inthe 'timplest earliest routers' and workedl ike an OS. The packet would arrive and signal the processor and then the packet would be copied into the router memory and then copied into the output port buffer
	- If the memory bandwith max is B/s then the forwarding throughput $<B/2$
- **Switching Via bus**
	- Input port transfers packet directly to the output port over a shared bus
	- Input port pre-pends a [[switch-internal label]] to the packet indidcating the output port to recieve it
	- All output ports have access to the packet but only designated one transmits it
	- only 1 packet allowed on the bus at a time
	- This speed is usualy sufficient for small networks
- **Switching via an interconnection network**
	- Crossbar switch is an interconnection network consisting of:
		- *2N* busses
		- Connecting *N* input ports to *N* output ports
	- ![[Pasted image 20220525235247.png]]
	- Each intersection can be opened or closed by the switch fabric controller
- Output Port Processing
